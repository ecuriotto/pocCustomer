
(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('pbTitle',function(){return{template:'<h1 ng-if="\'Level 1\' === properties.level" class="text-{{ properties.alignment }}">{{properties.text | uiTranslate}}</h1>\n<h2 ng-if="\'Level 2\' === properties.level" class="text-{{ properties.alignment }}">{{properties.text | uiTranslate}}</h2>\n<h3 ng-if="\'Level 3\' === properties.level" class="text-{{ properties.alignment }}">{{properties.text | uiTranslate}}</h3>\n<h4 ng-if="\'Level 4\' === properties.level" class="text-{{ properties.alignment }}">{{properties.text | uiTranslate}}</h4>\n<h5 ng-if="\'Level 5\' === properties.level" class="text-{{ properties.alignment }}">{{properties.text | uiTranslate}}</h5>\n<h6 ng-if="\'Level 6\' === properties.level" class="text-{{ properties.alignment }}">{{properties.text | uiTranslate}}</h6>\n'};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('pbTabsContainer',function(){return{template:''};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('pbDataTable',function(){return{controllerAs:'ctrl',controller:function PbDataTableCtrl($scope,$http,$log,$filter){var vm=this;Object.defineProperty(vm,'jsonData',{'get':function(){var data=$filter('filter')(this.data||[],$scope.properties.filter||undefined);if(vm.sortOptions.property===undefined||vm.sortOptions.direction===undefined){return data;}
return $filter('orderBy')(data,vm.sortOptions.property,vm.sortOptions.direction);},'set':function(data){this.data=data;}});this.sortOptions={property:($scope.properties.sortColumns||[])[0],direction:false};this.pagination={currentPage:1,total:0};this.hasMultiColumns=function(){return Array.isArray($scope.properties.columnsKey);};this.isSelectable=function(){return $scope.properties.isBound('selectedRow');};this.createRequest=function(){var params={c:$scope.properties.pageSize,p:this.pagination.currentPage-1||0,s:$scope.properties.filter};if(this.sortOptions.property){params.o=this.sortOptions.property+' '+(this.sortOptions.direction?'DESC':'ASC');}
return{url:this.removeHandledParams($scope.properties.apiUrl),transformResponse:$http.defaults.transformResponse.concat(transformResponse),params:angular.extend({},$scope.properties.params||{},params)};};this.removeHandledParams=function(url){return['c','p'].reduce(function(acc,param){return acc.replace(new RegExp('(&'+param+'=[^&#]*([&#])?)','g'),'$2').replace(new RegExp('[?]'+param+'=[^&#]*&?','g'),'?');},url||'');};this.updateResultsFromAPI=function(){if($scope.properties.apiUrl){$http(vm.createRequest()).then(function(response){vm.results=response.data.results;vm.pagination=response.data.pagination;}).catch(function(error){$log.error(error);});}};this.updateResultsFromJson=function(){var start=(vm.pagination.currentPage-1)*$scope.properties.pageSize;var end=vm.pagination.currentPage*$scope.properties.pageSize;vm.results=vm.jsonData.slice(start,end);};this.sortHandler=function(){this.updateResults();};this.paginationHandler=function(){this.updateResults();};this.selectRowHandler=function(row){if(this.isSelectable()){$scope.properties.selectedRow=row;}};this.isColumnSortable=function(index){return!!this.getSorter(index);};this.getSorter=function(index){if($scope.properties.type==='Variable'){return $scope.properties.columnsKey[index];}
if(angular.isArray($scope.properties.sortColumns)){var columnKey=$scope.properties.columnsKey[index];if(columnKey.indexOf("|")>0){columnKey=columnKey.substring(0,columnKey.indexOf("|")).trim();}
if($scope.properties.sortColumns.indexOf(columnKey)>-1){return columnKey;}}
return undefined;};function transformResponse(data,header){return{results:data,pagination:parseContentRange(header('Content-Range'))};}
function parseContentRange(strContentRange){if(strContentRange===null){return{};}
var arrayContentRange=strContentRange.split('/');var arrayIndexNumPerPage=arrayContentRange[0].split('-');return{total:parseInt(arrayContentRange[1],10),currentPage:parseInt(arrayIndexNumPerPage[0],10)+1};}
vm.updateResults=function(){if($scope.properties.type==='Variable'){vm.updateResultsFromJson();}else{vm.updateResultsFromAPI();}};$scope.$watch('[properties.pageSize, properties.apiUrl, properties.filter, properties.params]',resetPaginationAndUpdateResults,true);function resetPaginationAndUpdateResults(){vm.pagination={currentPage:1,total:vm.jsonData.length};vm.updateResults();}
$scope.$watchCollection('properties.content',function(data){if(!Array.isArray(data)){return;}
vm.jsonData=data;vm.pagination={currentPage:1,total:data.length};vm.updateResults();});},template:'<div class="table-responsive">\n    <table bonitable\n           sort-options="ctrl.sortOptions"\n           on-sort="ctrl.sortHandler()"\n           class="table table-striped" ng-class="{\'table-hover\': ctrl.isSelectable()}">\n        <thead>\n            <tr>\n                <th ng-repeat="header in properties.headers">\n                    <div ng-if="ctrl.isColumnSortable($index)" bo-sorter="{{ctrl.getSorter($index)}}">\n                            {{ header | uiTranslate }}\n                    </div>\n                    <div ng-if="!ctrl.isColumnSortable($index)">\n                        {{ header | uiTranslate }}\n                    </div>\n                </th>\n            </tr>\n        </thead>\n        <tbody ng-if="ctrl.hasMultiColumns()">\n        <tr ng-repeat="row in ctrl.results" ng-click="ctrl.selectRowHandler(row)"\n            ng-class="{\'info\': row === properties.selectedRow}">\n            <td ng-repeat="column in properties.columnsKey track by $index">\n                {{ $eval(column, row) | uiTranslate }}\n            </td>\n        </tr>\n        </tbody>\n        <tbody ng-if="!ctrl.hasMultiColumns()">\n        <tr ng-repeat="row in ctrl.results" ng-click="ctrl.selectRowHandler(row)"\n            ng-class="{\'info\': row === properties.selectedRow}">\n            <td> {{ row | uiTranslate }}</td>\n        </tr>\n        </tbody>\n    </table>\n    <div class="hidden-xs"\n         ng-repeat="options in [{\'maxSize\': 5, \'rotate\': false}]"\n         ng-include="\'/dataTable/pagination.html\'" >\n    </div>\n    <div class="visible-xs text-center"\n         ng-repeat="options in [{\'maxSize\': 3, \'rotate\': true}]"\n         ng-include="\'/dataTable/pagination.html\'" >\n    </div>\n\n    <script type="text/ng-template" id="/dataTable/pagination.html">\n        <pagination ng-if="ctrl.pagination.total > properties.pageSize"\n                    total-items="ctrl.pagination.total"\n                    items-per-page="properties.pageSize"\n                    direction-links="true"\n                    boundary-links="true"\n                    previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"\n                    rotate="{{options.rotate}}"\n                    max-size="{{options.maxSize}}"\n                    ng-model="ctrl.pagination.currentPage"\n                    ng-change="ctrl.paginationHandler()">\n        </pagination>\n    </script>\n</div>\n'};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('pbImage',function(){return{template:'<img class="img-responsive" ng-if="(properties.srcType ===\'Asset\' &amp;&amp; properties.assetName) || (properties.srcType !== \'Asset\' &amp;&amp; properties.url)" ng-src="{{ (properties.srcType===\'Asset\')? ((environment.editor.pageId) ? \'preview/page/\' + environment.editor.pageId + \'/\' : \'\' ) + \'assets/img/\' + properties.assetName : properties.url }}" alt="{{ properties.alt }}">\n<img class="img-responsive" ng-if="!(properties.srcType ===\'Asset\' &amp;&amp; properties.assetName) &amp;&amp; !(properties.srcType !== \'Asset\' &amp;&amp; properties.url)" ng-src="data:image/svg+xml,%3Csvg%20xmlns%3D\'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg\'%20viewBox%3D\'0%200%2050%2020\'%3E%3Cpath%20fill%3D\'%23ccc\'%20d%3D\'M10%201v18h30V1H10zm29%2017H11V2h28v16zM20%209.1l3%203%205-7L36%2016H14l6-6.9zM18%206c0%201.1-.9%202-2%202s-2-.9-2-2%20.9-2%202-2%202%20.9%202%202z\'%2F%3E%3C%2Fsvg%3E">\n'};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('customExpTableBillOfMaterial',function(){return{controllerAs:'ctrl',controller:function($scope){$scope.selectToDisplay=function(item){$scope.properties.selected=item;}
$scope.toggleRow=function(item,parent){if($scope.selected&&$scope.selected.componentNumber==item.componentNumber){$scope.selected=parent;}else{$scope.selected=item;}};$scope.isSelected=function(item){var output=false;if($scope.selected&&item.componentNumber===$scope.selected.componentNumber)
output=true;if($scope.selected&&item.componentNumber===$scope.selected.itemNumber)
output=true;return output;};},template:'\n    <div>\n      <table class="table table-condensed table-hover">\n          <thead>\n            <tr>\n                <th>L1</th>\n                <th>L2</th>\n                <th>level</th>\n                <th>componentNumber</th>\n                <th>itemNumber</th>\n            </tr>\n          </thead>\n          <tbody ng-repeat="l1 in properties.values" >\n            <tr  ng-click="selectToDisplay(l1)">\n                <td><img ng-if="l1.isLeaf === \'0\' && !isSelected(l1)" style="height:20px" ng-click="toggleRow(l1,undefined)" src="/bonita/portal/resource/app/AP/cdn/content/assets/img/icons8-expand-64.png">\n                <img ng-if="l1.isLeaf === \'0\' && isSelected(l1)" style="height:20px"  ng-click="toggleRow(l1,undefined)" src="/bonita/portal/resource/app/AP/cdn/content/assets/img/icons8-expand-64.png"></td>\n                <td></td>\n                <td>{{l1.level}}</td>\n                <td>{{l1.componentNumber}}</td>\n                <td>{{l1.itemNumber}}</td>\n            </tr>\n            <tr ng-if="isSelected(l1)" ng-repeat-start="l2 in l1.componentList"  ng-click="selectToDisplay(l2)" >\n                <td></td>\n                <!--<td><a ng-if="l2.isLeaf === \'0\'" ng-click="toggleRow(l2,l1)" href="">++</a></td>-->\n                <td><img ng-if="l2.isLeaf === \'0\' && !isSelected(l2)" style="height:20px" ng-click="toggleRow(l2,l1)" src="/bonita/portal/resource/app/AP/cdn/content/assets/img/icons8-expand-64.png">\n                <img ng-if="l2.isLeaf === \'0\' && isSelected(l2)" style="height:20px"  ng-click="toggleRow(l2,l1)" src="/bonita/portal/resource/app/AP/cdn/content/assets/img/icons8-expand-64.png"></td>\n                <td>{{l2.level}}</td>\n                <td>{{l2.componentNumber}}</td>\n                <td>{{l2.itemNumber}}</td>\n            </tr>\n            <tr ng-repeat-end ng-if="isSelected(l2)"  ng-repeat="l3 in l2.componentList" ng-click="selectToDisplay(l3)" >\n                <td></td>\n                <td></td>\n                <td>{{l3.level}}</td>\n                <td>{{l3.componentNumber}}</td>\n                <td>{{l3.itemNumber}}</td>\n            </tr>\n          </tbody>\n      </table>\n    </div>'};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('pbButton',function(){return{controllerAs:'ctrl',controller:function PbButtonCtrl($scope,$http,$location,$log,$window,localStorageService,modalService){'use strict';var vm=this;this.action=function action(){if($scope.properties.action==='Remove from collection'){removeFromCollection();closeModal($scope.properties.closeOnSuccess);}else if($scope.properties.action==='Add to collection'){addToCollection();closeModal($scope.properties.closeOnSuccess);}else if($scope.properties.action==='Start process'){startProcess();}else if($scope.properties.action==='Submit task'){submitTask();}else if($scope.properties.action==='Open modal'){closeModal($scope.properties.closeOnSuccess);openModal($scope.properties.modalId);}else if($scope.properties.action==='Close modal'){closeModal(true);}else if($scope.properties.url){doRequest($scope.properties.action,$scope.properties.url);}};function openModal(modalId){modalService.open(modalId);};function closeModal(shouldClose){if(shouldClose)
modalService.close();};function removeFromCollection(){if($scope.properties.collectionToModify){if(!Array.isArray($scope.properties.collectionToModify)){throw'Collection property for widget button should be an array, but was '+$scope.properties.collectionToModify;}
var index=-1;if($scope.properties.collectionPosition==='First'){index=0;}else if($scope.properties.collectionPosition==='Last'){index=$scope.properties.collectionToModify.length-1;}else if($scope.properties.collectionPosition==='Item'){index=$scope.properties.collectionToModify.indexOf($scope.properties.removeItem);}
if(index!==-1){$scope.properties.collectionToModify.splice(index,1);}}}
function addToCollection(){if(!$scope.properties.collectionToModify){$scope.properties.collectionToModify=[];}
if(!Array.isArray($scope.properties.collectionToModify)){throw'Collection property for widget button should be an array, but was '+$scope.properties.collectionToModify;}
var item=angular.copy($scope.properties.valueToAdd);if($scope.properties.collectionPosition==='First'){$scope.properties.collectionToModify.unshift(item);}else{$scope.properties.collectionToModify.push(item);}}
function startProcess(){var id=getUrlParam('id');if(id){var prom=doRequest('POST','../API/bpm/process/'+id+'/instantiation',getUserParam()).then(function(){localStorageService.delete($window.location.href);});}else{$log.log('Impossible to retrieve the process definition id value from the URL');}}
function doRequest(method,url,params){vm.busy=true;var req={method:method,url:url,data:angular.copy($scope.properties.dataToSend),params:params};return $http(req).success(function(data,status){$scope.properties.dataFromSuccess=data;notifyParentFrame({message:'success',status:status,dataFromSuccess:data});if($scope.properties.targetUrlOnSuccess&&method!=='GET'){redirectIfNeeded();}
closeModal($scope.properties.closeOnSuccess);}).error(function(data,status){$scope.properties.dataFromError=data;notifyParentFrame({message:'error',status:status,dataFromError:data});}).finally(function(){vm.busy=false;});}
function redirectIfNeeded(){var iframeId=$window.frameElement?$window.frameElement.id:null;if(!iframeId||iframeId&&iframeId.indexOf('bonitaframe')!==0){$window.location.assign($scope.properties.targetUrlOnSuccess);}}
function notifyParentFrame(additionalProperties){if($window.parent!==$window.self){var dataToSend=angular.extend({},$scope.properties,additionalProperties);$window.parent.postMessage(JSON.stringify(dataToSend),'*');}}
function getUserParam(){var userId=getUrlParam('user');if(userId){return{'user':userId};}
return{};}
function getUrlParam(param){var paramValue=$location.absUrl().match('[//?&]'+param+'=([^&#]*)($|[&#])');if(paramValue){return paramValue[1];}
return'';}
function submitTask(){var id;id=getUrlParam('id');if(id){doRequest('POST','../API/bpm/userTask/'+getUrlParam('id')+'/execution',getUserParam()).then(function(){localStorageService.delete($window.location.href);});}else{$log.log('Impossible to retrieve the task id value from the URL');}}},template:'<div class="text-{{ properties.alignment }}">\n    <button\n        ng-class="\'btn btn-\' + properties.buttonStyle"\n        ng-click="ctrl.action()"\n        type="button"\n        ng-disabled="properties.disabled || ctrl.busy" ng-bind-html="properties.label | uiTranslate"></button>\n</div>\n'};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('customWatchStatus',function(){return{controllerAs:'ctrl',controller:function($scope){var urlBase="/bonita/portal/resource/app/AP/cdn/content/assets/img/";$scope.urls={"stolen":urlBase+($scope.properties.watch.StatusCode==="001"?"stolen_gold.png":"stolen_grey.png"),"unrepairable":urlBase+($scope.properties.watch.StatusCode==="003"?"unrepairable_gold.png":"unrepairable_grey.png"),"warranty":urlBase+($scope.properties.watch.repairWarranties>0?"AP_Warranty_Gold.png":"AP_Warranty_Grey.png"),}},template:'<img ng-src="{{urls.stolen}}" alt="Description" />\n<img ng-src="{{urls.unrepairable}}" alt="Description" />\n<img ng-src="{{urls.warranty}}" alt="Description" />\n\n'};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('customToaster',function(){return{controllerAs:'ctrl',controller:function PbToastrCtrl($scope,toaster){'use strict';var vm=this;$scope.$watchCollection('properties.toasters',function(data){if(!Array.isArray(data)){return;}
if(data.length>0){var toast=data.shift();toaster.pop(toast)}});},template:'<toaster-container toaster-options="{{properties.options}}"></toaster-container>\n'};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('pbTextarea',function(){return{controllerAs:'ctrl',controller:function PbTextAreaCtrl($scope,$log,widgetNameFactory){'use strict';this.name=widgetNameFactory.getName('pbTextArea');if(!$scope.properties.isBound('value')){$log.error('the pbTextArea property named "value" need to be bound to a variable');}},template:'<div ng-class="{\n    \'form-horizontal\': properties.labelPosition === \'left\' && !properties.labelHidden,\n    \'row\': properties.labelPosition === \'top\' && !properties.labelHidden || properties.labelHidden\n    }">\n    <div class="form-group">\n        <label\n            ng-if="!properties.labelHidden"\n            ng-class="{ \'control-label--required\': properties.required }"\n            class="control-label col-xs-{{ !properties.labelHidden && properties.labelPosition === \'left\' ? properties.labelWidth : 12 }}">\n            {{ properties.label | uiTranslate }}\n        </label>\n        <div class="col-xs-{{ 12 - (!properties.labelHidden && properties.labelPosition === \'left\' ? properties.labelWidth : 0) }}">\n            <textarea class="form-control"\n                name="{{ctrl.name}}"\n                ng-model="properties.value"\n                ng-model-options="{ allowInvalid: true }"\n                ng-required="properties.required"\n                ng-minlength="properties.minLength"\n                ng-maxlength="properties.maxLength"\n                ng-readonly="properties.readOnly">\n            </textarea>\n            <div ng-messages="$form[ctrl.name].$dirty && $form[ctrl.name].$error " ng-messages-include="forms-generic-errors.html" role="alert"></div>\n        </div>\n    </div>\n</div>\n'};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('pbText',function(){return{template:'<p ng-if="properties.allowHTML" class="text-{{ properties.alignment }}" ng-bind-html="properties.text | uiTranslate"></p>\n<p ng-if="!properties.allowHTML" class="text-{{ properties.alignment }}" ng-bind="properties.text | uiTranslate"></p>\n'};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('pbInput',function(){return{controllerAs:'ctrl',controller:function PbInputCtrl($scope,$log,widgetNameFactory){'use strict';this.name=widgetNameFactory.getName('pbInput');if(!$scope.properties.isBound('value')){$log.error('the pbInput property named "value" need to be bound to a variable');}},template:'<div ng-class="{\n    \'form-horizontal\': properties.labelPosition === \'left\' && !properties.labelHidden,\n    \'row\': properties.labelPosition === \'top\' && !properties.labelHidden || properties.labelHidden\n    }">\n    <div class="form-group">\n        <label\n            ng-if="!properties.labelHidden"\n            ng-class="{ \'control-label--required\': properties.required }"\n            class="control-label col-xs-{{ !properties.labelHidden && properties.labelPosition === \'left\' ? properties.labelWidth : 12 }}" ng-bind-html="properties.label | uiTranslate">\n        </label>\n        <div class="col-xs-{{ 12 - (!properties.labelHidden && properties.labelPosition === \'left\' ? properties.labelWidth : 0) }}">\n            <input\n                type="{{properties.type}}"\n                class="form-control"\n                placeholder="{{ properties.placeholder | uiTranslate }}"\n                ng-model="properties.value"\n                ng-model-options="{ allowInvalid: true }"\n                name="{{ctrl.name}}"\n                ng-required="properties.required"\n                ng-minlength="properties.minLength"\n                ng-maxlength="properties.maxLength"\n                min="{{properties.min}}"\n                max="{{properties.max}}"\n                step="{{properties.step}}"\n                ng-readonly="properties.readOnly">\n            <div ng-messages="$form[ctrl.name].$dirty && $form[ctrl.name].$error " ng-messages-include="forms-generic-errors.html" role="alert"></div>\n        </div>\n    </div>\n</div>\n'};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('pbFileViewer',function(){return{controllerAs:'ctrl',controller:function WidgetController($scope,$log,$window,$sce){var controller=this;var userAgent=$window.navigator.userAgent;var vendor=$window.navigator.vendor;$scope.$watch('[properties.document, properties.url]',function(){controller.fileName=getFileName();controller.loadDocument();},true);controller.loadDocument=function(){controller.document=null;if($scope.properties.document){if(angular.isArray($scope.properties.document)){$log.error('The documentViewer property named "document" should hold a single document. You might want to use documents[0]');}else if(angular.isObject($scope.properties.document)&&$scope.properties.document.id){controller.document=$scope.properties.document;}else{$log.error('The documentViewer property named "document" does not contain a Bonita document and cannot be rendered.');}}};controller.isPDF=function(){return['pdf'].indexOf(controller.extractFileExtension(controller.fileName))>-1;};controller.isImage=function(){return['png','jpg','jpeg','gif'].indexOf(controller.extractFileExtension(controller.fileName))>-1;};controller.getDocumentViewUrl=function(){if(isTypeProcessDocument()&&controller.document){if(isInitializedByAnExternalSystem(controller.document)){return controller.document.url;}
return'../API/formsDocumentImage?document='+controller.document.id;}else{return $scope.properties.url;}};controller.getTrustedDocumentViewUrl=function(){return $sce.trustAsResourceUrl(controller.getDocumentViewUrl());};controller.extractFileExtension=function(file){return file.split('?')[0].split('.').pop().toLowerCase();};controller.isMobileDevice=function(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r|s)|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp(i|ip)|hs\-c|ht(c(\-||_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac(|\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(|\/)|klon|kpt|kwc\-|kyo(c|k)|le(no|xi)|lg(g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-||o|v)|zz)|mt(50|p1|v)|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v)|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-|)|webc|whit|wi(g|nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((a||'').substr(0,4)))check=true;})(userAgent||vendor||$window.opera);return check;};controller.openInNewTab=function(){$window.open(controller.getTrustedDocumentViewUrl()+'','_blank');};function getFileName(){if(isTypeUrl()){return extractFileName($scope.properties.url);}
if(isInitializedByAnExternalSystem($scope.properties.document)){return extractFileName($scope.properties.document.url);}
return $scope.properties.document&&$scope.properties.document.fileName;}
function isTypeUrl(){return $scope.properties.type==='URL';}
function isTypeProcessDocument(){return $scope.properties.type==='Process document';}
function extractFileName(name){return name&&name.split('?')[0].split('/').pop();}
function isInitializedByAnExternalSystem(document){return document&&document.fileName==null;}},template:'<div ng-if="environment">\n  <div>\n    <a href="" class="FileViewer-fileName">{{ \'FileName\' | translate }}</a>\n  </div>\n  <div ng-if="properties.showPreview" class="img-responsive FileViewer-iconPreview"  >\n    <img class="img-responsive"  style="padding-top:10px;margin: auto;" src="data:image/svg+xml,%3Csvg%20viewBox%3D%270%200%2040%2020%27%20version%3D%271.1%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20xmlns%3Axlink%3D%27http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%27%20xml%3Aspace%3D%27preserve%27%20style%3D%27fill-rule%3Aevenodd%3Bclip-rule%3Aevenodd%3Bstroke-linejoin%3Around%3Bstroke-miterlimit%3A1.41421%3B%27%3E%3Cg%3E%3Cpath%20d%3D%27M11.75%2C19.775l-3.283%2C0c-0.52%2C0%20-0.942%2C-0.45%20-0.942%2C-1.005c0%2C-3.396%200%2C-14.415%200%2C-17.81c0%2C-0.555%200.422%2C-1.006%200.942%2C-1.006l8.468%2C0l5.69%2C6.105l0%2C2.841c-2.097%2C0%20-4.055%2C0.595%20-5.717%2C1.624l-6.544%2C0l0%2C1.508l4.628%2C0c-0.452%2C0.445%20-0.864%2C0.93%20-1.233%2C1.447l-3.395%2C0l0%2C1.508l2.496%2C0c-0.093%2C0.188%20-0.18%2C0.379%20-0.262%2C0.573c-0.155%2C0.282%20-0.288%2C0.574%20-0.394%2C0.876l-1.84%2C0l0%2C1.508l1.537%2C0l-0.002%2C0.029c-0.098%2C0.586%20-0.149%2C1.188%20-0.149%2C1.802ZM19.785%2C7.569l-9.421%2C0l0%2C1.508l9.421%2C0l0%2C-1.508ZM21.551%2C6.031l-4.734%2C-5.003c0%2C0%200%2C2.537%200%2C3.997c0%2C0.267%200.1%2C0.523%200.276%2C0.711c0.177%2C0.189%200.417%2C0.295%200.667%2C0.295l3.791%2C0Z%27%20style%3D%27fill%3A%23ccc%3B%27%2F%3E%3Cg%3E%3Cpath%20d%3D%27M16.648%2C16.683l-1.021%2C-1.037c2.211%2C-2.052%205.172%2C-3.307%208.424%2C-3.307c3.252%2C0%206.213%2C1.255%208.424%2C3.307l-1.021%2C1.037c-1.981%2C-1.9%20-4.571%2C-3.051%20-7.403%2C-3.051c-2.832%2C0%20-5.422%2C1.151%20-7.403%2C3.051Z%27%20style%3D%27fill%3A%23ccc%3B%27%2F%3E%3Cpath%20d%3D%27M19.052%2C17.849l-0.259%2C0.43c1.468%2C0.837%203.247%2C1.327%205.163%2C1.327c2%2C0%203.85%2C-0.533%205.353%2C-1.438l-0.255%2C-0.424c-1.456%2C0.815%20-3.21%2C1.29%20-5.098%2C1.29c-1.804%2C0%20-3.487%2C-0.435%20-4.904%2C-1.185Z%27%20style%3D%27fill%3A%23ccc%3B%27%2F%3E%3Cpath%20d%3D%27M24.06%2C12.353c1.587%2C0%202.876%2C1.289%202.876%2C2.876c0%2C1.587%20-1.289%2C2.876%20-2.876%2C2.876c-1.588%2C0%20-2.877%2C-1.289%20-2.877%2C-2.876c0%2C-1.587%201.289%2C-2.876%202.877%2C-2.876ZM25.244%2C14.174c0.582%2C0%201.055%2C0.473%201.055%2C1.055c0%2C0.582%20-0.473%2C1.055%20-1.055%2C1.055c-0.582%2C0%20-1.054%2C-0.473%20-1.054%2C-1.055c0%2C-0.582%200.472%2C-1.055%201.054%2C-1.055Z%27%20style%3D%27fill%3A%23ccc%3B%27%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E" alt="{{ \'File viewer icon\' | uiTranslate }}"/>\n  </div>\n</div>\n\n<div ng-if="!environment && ctrl.fileName">\n  <a class="FileViewer-fileName"\n     title="{{\'View\' | uiTranslate}} {{ ctrl.fileName || ctrl.getDocumentViewUrl() }}"\n     ng-if="ctrl.isImage() || ctrl.isPDF()"\n     ng-href="{{ctrl.getTrustedDocumentViewUrl()}}"\n     box-viewer>\n      {{ ctrl.fileName || ctrl.getDocumentViewUrl() }}\n  </a>\n  <a class="FileViewer-fileName"\n     title="{{\'Download\' | uiTranslate}} {{ ctrl.fileName || ctrl.getDocumentViewUrl() }}"\n     ng-if="!ctrl.isImage() && !ctrl.isPDF()"\n     ng-href="{{ctrl.getDocumentViewUrl()}}">\n      {{ ctrl.fileName || ctrl.getDocumentViewUrl() }}\n  </a>\n\n  <div ng-if="properties.showPreview && ctrl.isPDF() && !ctrl.isMobileDevice()">\n    <iframe ng-src="{{ctrl.getTrustedDocumentViewUrl()}}" frameborder="0" class="document-iframe"></iframe>\n  </div>\n\n  <div\n      ng-if="properties.showPreview && ctrl.isPDF() && ctrl.isMobileDevice()"\n      ng-click="ctrl.openInNewTab()">\n      <embed\n          ng-src="{{ctrl.getTrustedDocumentViewUrl()}}"\n          frameborder="0"\n          scrolling="no"\n          class="FileViewer-iframe--mobile">\n      </embed>\n  </div>\n\n  <div ng-if="properties.showPreview && ctrl.isImage()">\n    <a title="{{ ctrl.fileName || ctrl.getDocumentViewUrl() }}"\n       box-viewer\n       ng-href="{{ctrl.getTrustedDocumentViewUrl()}}">\n      <img ng-src="{{ctrl.getTrustedDocumentViewUrl()}}"\n           alt="{{ \'File unavailable\' | translate }}"\n           class="FileViewer-img img-responsive"/>\n    </a>\n  </div>\n\n  <div ng-if="properties.showPreview && (!ctrl.isImage() && !ctrl.isPDF())">\n    <span class="FileViewer-previewNotAvailable" ui-translate>Preview is not available</span>\n  </div>\n</div>\n'};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('pbFormContainer',function(){return{template:''};});(function(){try{return angular.module('bonitasoft.ui.widgets');}catch(e){return angular.module('bonitasoft.ui.widgets',[]);}})().directive('pbTable',function(){return{controllerAs:'ctrl',controller:function PbTableCtrl($scope){this.isArray=Array.isArray;this.isClickable=function(){return $scope.properties.isBound('selectedRow');};this.selectRow=function(row){if(this.isClickable()){$scope.properties.selectedRow=row;}};this.isSelected=function(row){return angular.equals(row,$scope.properties.selectedRow);}},template:'<div class="table-responsive">\n    <table class="table table-striped" ng-class="{\'table-hover\': ctrl.isClickable()}">\n        <thead>\n            <tr>\n                <th ng-repeat="header in properties.headers">\n                    {{ header | uiTranslate }}\n                </th>\n            </tr>\n        </thead>\n        <tbody ng-if="ctrl.isArray(properties.content) && ctrl.isArray(properties.columnsKey)">\n            <tr ng-repeat="row in properties.content" ng-click="ctrl.selectRow(row)" ng-class="{\'info\': ctrl.isSelected(row)}">\n                <td ng-repeat="column in properties.columnsKey track by $index">\n                    {{ $eval(column, row) | uiTranslate }}\n                </td>\n            </tr>\n        </tbody>\n        <tbody ng-if="ctrl.isArray(properties.content) && !ctrl.isArray(properties.columnsKey)">\n            <tr ng-repeat="row in properties.content" ng-click="ctrl.selectRow(row)" ng-class="{\'info\': ctrl.isSelected(row)}">\n                <td> {{ row | uiTranslate }} </td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n'};});